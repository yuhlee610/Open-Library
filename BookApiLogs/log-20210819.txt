2021-08-19 09:46:07.929 +07:00 [INF] Application is Starting
2021-08-19 09:46:11.132 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 09:46:11.699 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 09:46:11.699 +07:00 [INF] Hosting environment: Development
2021-08-19 09:46:11.699 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 09:46:11.776 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 09:46:11.986 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 212.9990ms
2021-08-19 09:46:12.905 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 09:46:13.145 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 240.5194ms
2021-08-19 09:46:52.244 +07:00 [INF] Request starting HTTP/2 POST https://localhost:44348/api/Account/Login application/json 48
2021-08-19 09:46:52.252 +07:00 [INF] CORS policy execution successful.
2021-08-19 09:46:52.309 +07:00 [INF] Executing endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 09:46:52.364 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookApi.Models.LoginUserDTO) on controller BookApi.Controllers.AccountController (BookApi).
2021-08-19 09:46:53.196 +07:00 [INF] Login attempt for user@example.com
2021-08-19 09:46:54.515 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 09:46:56.071 +07:00 [INF] Executed DbCommand (95ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-08-19 09:46:56.694 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.Threading.Tasks.Task`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-08-19 09:46:56.705 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-08-19 09:46:57.047 +07:00 [INF] Executed action BookApi.Controllers.AccountController.Login (BookApi) in 4676.1244ms
2021-08-19 09:46:57.048 +07:00 [INF] Executed endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 09:46:57.055 +07:00 [INF] Request finished HTTP/2 POST https://localhost:44348/api/Account/Login application/json 48 - 200 - application/json;+charset=utf-8 4813.6098ms
2021-08-19 09:47:49.540 +07:00 [INF] Application is Starting
2021-08-19 09:47:50.918 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 09:47:51.316 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 09:47:51.316 +07:00 [INF] Hosting environment: Development
2021-08-19 09:47:51.316 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 09:47:51.378 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 09:47:51.604 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 228.0179ms
2021-08-19 09:47:51.958 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 09:47:52.160 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 202.1068ms
2021-08-19 09:48:02.862 +07:00 [INF] Request starting HTTP/2 POST https://localhost:44348/api/Account/Login application/json 48
2021-08-19 09:48:02.869 +07:00 [INF] CORS policy execution successful.
2021-08-19 09:48:02.922 +07:00 [INF] Executing endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 09:48:02.966 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookApi.Models.LoginUserDTO) on controller BookApi.Controllers.AccountController (BookApi).
2021-08-19 09:48:03.437 +07:00 [INF] Login attempt for user@example.com
2021-08-19 09:48:04.665 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 09:48:06.312 +07:00 [INF] Executed DbCommand (124ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-08-19 09:48:06.672 +07:00 [INF] Executed DbCommand (68ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-08-19 09:48:06.850 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-08-19 09:48:06.872 +07:00 [INF] Executed action BookApi.Controllers.AccountController.Login (BookApi) in 3898.2728ms
2021-08-19 09:48:06.874 +07:00 [INF] Executed endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 09:48:06.885 +07:00 [INF] Request finished HTTP/2 POST https://localhost:44348/api/Account/Login application/json 48 - 200 - application/json;+charset=utf-8 4022.6067ms
2021-08-19 09:49:38.135 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44348/api/Account/Login application/json 60
2021-08-19 09:49:38.149 +07:00 [INF] Executing endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 09:49:38.151 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookApi.Models.LoginUserDTO) on controller BookApi.Controllers.AccountController (BookApi).
2021-08-19 09:49:38.174 +07:00 [INF] Login attempt for user@example.com
2021-08-19 09:49:38.204 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 09:49:38.226 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-08-19 09:49:38.246 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-08-19 09:49:38.247 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-08-19 09:49:38.248 +07:00 [INF] Executed action BookApi.Controllers.AccountController.Login (BookApi) in 96.5689ms
2021-08-19 09:49:38.248 +07:00 [INF] Executed endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 09:49:38.248 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44348/api/Account/Login application/json 60 - 200 - application/json;+charset=utf-8 114.0434ms
2021-08-19 10:34:03.431 +07:00 [INF] Application is Starting
2021-08-19 10:34:04.731 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 10:34:05.072 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 10:34:05.072 +07:00 [INF] Hosting environment: Development
2021-08-19 10:34:05.072 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 10:34:05.114 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 10:34:05.246 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 132.5237ms
2021-08-19 10:34:05.446 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 10:34:05.554 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 107.8487ms
2021-08-19 10:37:48.731 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44348/api/Account/Login application/json 60
2021-08-19 10:37:48.789 +07:00 [INF] Executing endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 10:37:48.838 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookApi.Models.LoginUserDTO) on controller BookApi.Controllers.AccountController (BookApi).
2021-08-19 10:37:49.257 +07:00 [INF] Login attempt for user@example.com
2021-08-19 10:37:50.024 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 10:37:50.792 +07:00 [INF] Executed DbCommand (50ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-08-19 10:37:51.013 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-08-19 10:37:51.187 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-08-19 10:37:51.199 +07:00 [INF] Executed action BookApi.Controllers.AccountController.Login (BookApi) in 2356.4926ms
2021-08-19 10:37:51.201 +07:00 [INF] Executed endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 10:37:51.208 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44348/api/Account/Login application/json 60 - 200 - application/json;+charset=utf-8 2478.8548ms
2021-08-19 10:53:14.081 +07:00 [INF] Application is Starting
2021-08-19 10:53:15.175 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 10:53:15.424 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 10:53:15.424 +07:00 [INF] Hosting environment: Development
2021-08-19 10:53:15.424 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 10:53:15.460 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 10:53:15.569 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 110.3651ms
2021-08-19 10:53:15.771 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 10:53:15.874 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 103.0079ms
2021-08-19 10:55:28.276 +07:00 [INF] Application is Starting
2021-08-19 10:55:29.219 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 10:55:29.520 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 10:55:29.520 +07:00 [INF] Hosting environment: Development
2021-08-19 10:55:29.520 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 10:55:29.560 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 10:55:29.687 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 127.5806ms
2021-08-19 10:55:29.914 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 10:55:30.080 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 165.8614ms
2021-08-19 10:55:34.472 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44348/api/Account/Login application/json 60
2021-08-19 10:55:34.503 +07:00 [INF] Executing endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 10:55:34.534 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookApi.Models.LoginUserDTO) on controller BookApi.Controllers.AccountController (BookApi).
2021-08-19 10:55:34.844 +07:00 [INF] Login attempt for user@example.com
2021-08-19 10:55:35.532 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 10:55:36.190 +07:00 [INF] Executed DbCommand (47ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-08-19 10:55:36.380 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-08-19 10:55:36.516 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-08-19 10:55:36.527 +07:00 [INF] Executed action BookApi.Controllers.AccountController.Login (BookApi) in 1988.6741ms
2021-08-19 10:55:36.528 +07:00 [INF] Executed endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 10:55:36.534 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44348/api/Account/Login application/json 60 - 200 - application/json;+charset=utf-8 2061.9041ms
2021-08-19 10:57:14.371 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:44348/api/Account/Register application/json 72
2021-08-19 10:57:14.377 +07:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2021-08-19 10:57:14.385 +07:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2021-08-19 10:57:14.391 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:44348/api/Account/Register application/json 72 - 405 - - 19.9417ms
2021-08-19 10:57:41.308 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook application/json 72
2021-08-19 10:57:41.310 +07:00 [INF] Executing endpoint '405 HTTP Method Not Supported'
2021-08-19 10:57:41.310 +07:00 [INF] Executed endpoint '405 HTTP Method Not Supported'
2021-08-19 10:57:41.312 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook application/json 72 - 405 - - 6.3365ms
2021-08-19 10:58:20.293 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:44348/api/Book application/json 72
2021-08-19 10:58:20.294 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.BorrowBook (BookApi)'
2021-08-19 10:58:20.307 +07:00 [INF] Route matched with {action = "BorrowBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BorrowBook(BookApi.Models.BorrowInfo) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 10:58:34.066 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 10:58:34.112 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__borrowInfo_IdBook_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
FROM [Books] AS [b]
WHERE [b].[Id] = @__borrowInfo_IdBook_0
2021-08-19 10:58:34.870 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2021-08-19 11:05:20.328 +07:00 [INF] Application is Starting
2021-08-19 11:05:21.319 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 11:05:21.580 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 11:05:21.580 +07:00 [INF] Hosting environment: Development
2021-08-19 11:05:21.580 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 11:05:21.617 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 11:05:21.729 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 113.1156ms
2021-08-19 11:05:21.924 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 11:05:22.051 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 126.1372ms
2021-08-19 11:05:22.540 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:44348/api/Book application/json 72
2021-08-19 11:05:22.580 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.BorrowBook (BookApi)'
2021-08-19 11:05:22.618 +07:00 [INF] Route matched with {action = "BorrowBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BorrowBook(BookApi.Models.BorrowInfo) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 11:05:31.002 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 11:05:31.684 +07:00 [INF] Executed DbCommand (44ms) [Parameters=[@__borrowInfo_IdBook_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
FROM [Books] AS [b]
WHERE [b].[Id] = @__borrowInfo_IdBook_0
2021-08-19 11:05:36.272 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2021-08-19 13:36:55.838 +07:00 [INF] Application is Starting
2021-08-19 13:36:57.808 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 13:36:58.327 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 13:36:58.327 +07:00 [INF] Hosting environment: Development
2021-08-19 13:36:58.327 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 13:36:58.417 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 13:36:58.936 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 522.7781ms
2021-08-19 13:36:59.305 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 13:36:59.537 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 231.8391ms
2021-08-19 13:37:22.925 +07:00 [INF] Request starting HTTP/2 POST https://localhost:44348/api/Account/Login application/json 48
2021-08-19 13:37:22.933 +07:00 [INF] CORS policy execution successful.
2021-08-19 13:37:22.967 +07:00 [INF] Executing endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 13:37:23.003 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookApi.Models.LoginUserDTO) on controller BookApi.Controllers.AccountController (BookApi).
2021-08-19 13:37:23.371 +07:00 [INF] Login attempt for user@example.com
2021-08-19 13:37:24.077 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 13:37:24.807 +07:00 [INF] Executed DbCommand (51ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-08-19 13:37:25.029 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-08-19 13:37:25.169 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-08-19 13:37:25.186 +07:00 [INF] Executed action BookApi.Controllers.AccountController.Login (BookApi) in 2178.3623ms
2021-08-19 13:37:25.187 +07:00 [INF] Executed endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 13:37:25.192 +07:00 [INF] Request finished HTTP/2 POST https://localhost:44348/api/Account/Login application/json 48 - 200 - application/json;+charset=utf-8 2267.6527ms
2021-08-19 13:38:17.836 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:44348/api/Book application/json 60
2021-08-19 13:38:17.841 +07:00 [INF] CORS policy execution successful.
2021-08-19 13:38:17.843 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.BorrowBook (BookApi)'
2021-08-19 13:38:17.858 +07:00 [INF] Route matched with {action = "BorrowBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BorrowBook(BookApi.Models.BorrowInfo) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 13:38:22.104 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 13:38:22.181 +07:00 [INF] Executed DbCommand (54ms) [Parameters=[@__borrowInfo_IdBook_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
FROM [Books] AS [b]
WHERE [b].[Id] = @__borrowInfo_IdBook_0
2021-08-19 13:38:22.772 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2021-08-19 13:38:26.344 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookUser] ([BooksId], [UsersId])
VALUES (@p0, @p1);
2021-08-19 13:38:26.361 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = -1) (DbType = Binary), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [Author] = @p0, [CategoryId] = @p1, [Description] = @p2, [Name] = @p3, [Picture] = @p4, [Year] = @p5
WHERE [Id] = @p6;
SELECT @@ROWCOUNT;
2021-08-19 13:38:26.378 +07:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2021-08-19 13:38:26.378 +07:00 [INF] Executed action BookApi.Controllers.BookController.BorrowBook (BookApi) in 8520.2807ms
2021-08-19 13:38:26.379 +07:00 [INF] Executed endpoint 'BookApi.Controllers.BookController.BorrowBook (BookApi)'
2021-08-19 13:38:26.380 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:44348/api/Book application/json 60 - 200 - - 8544.3066ms
2021-08-19 13:38:46.586 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:44348/api/Book application/json 60
2021-08-19 13:38:46.587 +07:00 [INF] CORS policy execution successful.
2021-08-19 13:38:46.588 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.BorrowBook (BookApi)'
2021-08-19 13:38:46.588 +07:00 [INF] Route matched with {action = "BorrowBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BorrowBook(BookApi.Models.BorrowInfo) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 13:38:50.301 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 13:38:50.312 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__borrowInfo_IdBook_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
FROM [Books] AS [b]
WHERE [b].[Id] = @__borrowInfo_IdBook_0
2021-08-19 13:38:50.851 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2021-08-19 13:38:54.111 +07:00 [ERR] Failed executing DbCommand (28ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookUser] ([BooksId], [UsersId])
VALUES (@p0, @p1);
2021-08-19 13:38:54.188 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BookApi.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_BookUser'. Cannot insert duplicate key in object 'dbo.BookUser'. The duplicate key value is (1, 9487c2f9-7202-457d-bdcf-92616d7c9e6a).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:787be67e-ca66-43e5-a8f2-ea74423f4d38
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_BookUser'. Cannot insert duplicate key in object 'dbo.BookUser'. The duplicate key value is (1, 9487c2f9-7202-457d-bdcf-92616d7c9e6a).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:787be67e-ca66-43e5-a8f2-ea74423f4d38
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2021-08-19 13:47:26.038 +07:00 [INF] Application is Starting
2021-08-19 13:47:26.958 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 13:47:27.217 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 13:47:27.217 +07:00 [INF] Hosting environment: Development
2021-08-19 13:47:27.217 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 13:47:27.249 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 13:47:27.354 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 107.0740ms
2021-08-19 13:47:27.595 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 13:47:27.733 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 137.9845ms
2021-08-19 13:47:47.382 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:44348/api/Book application/json 60
2021-08-19 13:47:47.389 +07:00 [INF] CORS policy execution successful.
2021-08-19 13:47:47.413 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.BorrowBook (BookApi)'
2021-08-19 13:47:47.444 +07:00 [INF] Route matched with {action = "BorrowBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BorrowBook(BookApi.Models.BorrowInfo) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 13:47:48.346 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 13:47:48.936 +07:00 [INF] Executed DbCommand (50ms) [Parameters=[@__borrowInfo_IdBook_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
FROM [Books] AS [b]
WHERE [b].[Id] = @__borrowInfo_IdBook_0
2021-08-19 13:47:48.990 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2021-08-19 13:47:49.181 +07:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookUser] ([BooksId], [UsersId])
VALUES (@p0, @p1);
2021-08-19 13:47:49.222 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BookApi.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_BookUser'. Cannot insert duplicate key in object 'dbo.BookUser'. The duplicate key value is (1, 9487c2f9-7202-457d-bdcf-92616d7c9e6a).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0c349855-3ad2-4742-b954-0b1c2c48c514
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_BookUser'. Cannot insert duplicate key in object 'dbo.BookUser'. The duplicate key value is (1, 9487c2f9-7202-457d-bdcf-92616d7c9e6a).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0c349855-3ad2-4742-b954-0b1c2c48c514
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2021-08-19 13:47:49.347 +07:00 [ERR] Something went wrong in the BorrowBook!!
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Violation of PRIMARY KEY constraint 'PK_BookUser'. Cannot insert duplicate key in object 'dbo.BookUser'. The duplicate key value is (1, 9487c2f9-7202-457d-bdcf-92616d7c9e6a).
The statement has been terminated.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__169_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__277_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0c349855-3ad2-4742-b954-0b1c2c48c514
Error Number:2627,State:1,Class:14
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookApi.Repository.UnitOfWork.Save() in E:\.Net core Practice\Open Library\BookApi\BookApi\Repository\UnitOfWork.cs:line 76
   at BookApi.Controllers.BookController.BorrowBook(BorrowInfo borrowInfo) in E:\.Net core Practice\Open Library\BookApi\BookApi\Controllers\BookController.cs:line 107
2021-08-19 13:47:49.390 +07:00 [INF] Executing ObjectResult, writing value of type 'System.String'.
2021-08-19 13:47:49.396 +07:00 [INF] Executed action BookApi.Controllers.BookController.BorrowBook (BookApi) in 1946.6412ms
2021-08-19 13:47:49.396 +07:00 [INF] Executed endpoint 'BookApi.Controllers.BookController.BorrowBook (BookApi)'
2021-08-19 13:47:49.402 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:44348/api/Book application/json 60 - 500 - text/plain;+charset=utf-8 2019.3763ms
2021-08-19 13:48:06.635 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:44348/api/Book application/json 60
2021-08-19 13:48:06.635 +07:00 [INF] CORS policy execution successful.
2021-08-19 13:48:06.636 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.BorrowBook (BookApi)'
2021-08-19 13:48:06.636 +07:00 [INF] Route matched with {action = "BorrowBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BorrowBook(BookApi.Models.BorrowInfo) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 13:48:06.667 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 13:48:06.674 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__borrowInfo_IdBook_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
FROM [Books] AS [b]
WHERE [b].[Id] = @__borrowInfo_IdBook_0
2021-08-19 13:48:06.679 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2021-08-19 13:50:47.641 +07:00 [INF] Application is Starting
2021-08-19 13:50:48.574 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 13:50:48.823 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 13:50:48.823 +07:00 [INF] Hosting environment: Development
2021-08-19 13:50:48.823 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 13:50:48.872 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 13:50:48.986 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 116.9340ms
2021-08-19 13:50:49.187 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 13:50:49.294 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 106.7385ms
2021-08-19 13:51:02.089 +07:00 [INF] Request starting HTTP/2 PUT https://localhost:44348/api/Book application/json 60
2021-08-19 13:51:02.098 +07:00 [INF] CORS policy execution successful.
2021-08-19 13:51:02.129 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.BorrowBook (BookApi)'
2021-08-19 13:51:02.162 +07:00 [INF] Route matched with {action = "BorrowBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BorrowBook(BookApi.Models.BorrowInfo) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 13:51:03.138 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 13:51:03.774 +07:00 [INF] Executed DbCommand (56ms) [Parameters=[@__borrowInfo_IdBook_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Author], [t].[CategoryId], [t].[Description], [t].[Name], [t].[Picture], [t].[Year], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[Email], [t0].[EmailConfirmed], [t0].[FirstName], [t0].[LastName], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName], [t0].[BooksId], [t0].[UsersId]
FROM (
    SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__borrowInfo_IdBook_0
) AS [t]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b0].[BooksId], [b0].[UsersId]
    FROM [BookUser] AS [b0]
    INNER JOIN [AspNetUsers] AS [a] ON [b0].[UsersId] = [a].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t0].[BooksId], [t0].[UsersId], [t0].[Id]
2021-08-19 13:51:03.854 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2021-08-19 13:51:27.213 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2021-08-19 13:51:27.219 +07:00 [INF] Executed action BookApi.Controllers.BookController.BorrowBook (BookApi) in 25052.7437ms
2021-08-19 13:51:27.219 +07:00 [INF] Executed endpoint 'BookApi.Controllers.BookController.BorrowBook (BookApi)'
2021-08-19 13:51:27.224 +07:00 [INF] Request finished HTTP/2 PUT https://localhost:44348/api/Book application/json 60 - 400 - text/plain;+charset=utf-8 25134.8737ms
2021-08-19 13:56:30.792 +07:00 [INF] Application is Starting
2021-08-19 13:56:31.732 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 13:56:32.021 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 13:56:32.021 +07:00 [INF] Hosting environment: Development
2021-08-19 13:56:32.021 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 13:56:32.052 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 13:56:32.169 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 116.7930ms
2021-08-19 13:56:32.366 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 13:56:32.502 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 135.9429ms
2021-08-19 13:56:51.108 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44348/api/Account/Login application/json 60
2021-08-19 13:56:51.141 +07:00 [INF] Executing endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 13:56:51.171 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookApi.Models.LoginUserDTO) on controller BookApi.Controllers.AccountController (BookApi).
2021-08-19 13:56:51.505 +07:00 [INF] Login attempt for user@example.com
2021-08-19 13:56:52.223 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 13:56:52.821 +07:00 [INF] Executed DbCommand (49ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-08-19 13:56:53.020 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-08-19 13:56:53.158 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-08-19 13:56:53.171 +07:00 [INF] Executed action BookApi.Controllers.AccountController.Login (BookApi) in 1997.1344ms
2021-08-19 13:56:53.172 +07:00 [INF] Executed endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 13:56:53.177 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44348/api/Account/Login application/json 60 - 200 - application/json;+charset=utf-8 2068.4228ms
2021-08-19 13:58:52.151 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook?idUser&idBook application/json 72
2021-08-19 13:58:52.192 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-08-19 13:58:52.198 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-08-19 13:58:52.243 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook?idUser&idBook application/json 72 - 500 - text/plain 92.2465ms
2021-08-19 13:59:17.805 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook?idUser&idBook application/json 72
2021-08-19 13:59:17.810 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-08-19 13:59:17.815 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-08-19 13:59:17.817 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook?idUser&idBook application/json 72 - 500 - text/plain 12.9663ms
2021-08-19 14:00:19.073 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook application/json 72
2021-08-19 14:00:19.075 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-08-19 14:00:19.080 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-08-19 14:00:19.082 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook application/json 72 - 500 - text/plain 9.1377ms
2021-08-19 14:02:37.441 +07:00 [INF] Application is Starting
2021-08-19 14:02:38.378 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 14:02:38.617 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 14:02:38.617 +07:00 [INF] Hosting environment: Development
2021-08-19 14:02:38.617 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 14:02:38.653 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 14:02:38.762 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 110.7626ms
2021-08-19 14:02:38.994 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 14:02:39.644 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 649.2607ms
2021-08-19 14:02:48.469 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook application/json 72
2021-08-19 14:02:48.506 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-08-19 14:02:48.511 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: No authenticationScheme was specified, and there was no DefaultChallengeScheme found. The default schemes can be set using either AddAuthentication(string defaultScheme) or AddAuthentication(Action<AuthenticationOptions> configureOptions).
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.HandleAsync(RequestDelegate next, HttpContext context, AuthorizationPolicy policy, PolicyAuthorizationResult authorizeResult)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-08-19 14:02:48.557 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook application/json 72 - 500 - text/plain 88.4198ms
2021-08-19 14:03:38.083 +07:00 [INF] Application is Starting
2021-08-19 14:03:39.334 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 14:03:39.598 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 14:03:39.598 +07:00 [INF] Hosting environment: Development
2021-08-19 14:03:39.598 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 14:03:39.655 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 14:03:39.655 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook application/json 72
2021-08-19 14:03:39.980 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 329.0164ms
2021-08-19 14:03:40.047 +07:00 [INF] Bearer was not authenticated. Failure message: No SecurityTokenValidator available for token.
2021-08-19 14:03:40.051 +07:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2021-08-19 14:03:40.061 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2021-08-19 14:03:40.063 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook application/json 72 - 401 - - 412.3264ms
2021-08-19 14:03:40.267 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 14:03:40.378 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 111.3365ms
2021-08-19 14:03:52.818 +07:00 [INF] Request starting HTTP/1.1 POST https://localhost:44348/api/Account/Login application/json 60
2021-08-19 14:03:52.823 +07:00 [INF] Executing endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 14:03:52.862 +07:00 [INF] Route matched with {action = "Login", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(BookApi.Models.LoginUserDTO) on controller BookApi.Controllers.AccountController (BookApi).
2021-08-19 14:03:53.304 +07:00 [INF] Login attempt for user@example.com
2021-08-19 14:03:54.129 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 14:03:55.709 +07:00 [INF] Executed DbCommand (126ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedEmail] = @__normalizedEmail_0
2021-08-19 14:03:55.924 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__userId_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT [a0].[Name]
FROM [AspNetUserRoles] AS [a]
INNER JOIN [AspNetRoles] AS [a0] ON [a].[RoleId] = [a0].[Id]
WHERE [a].[UserId] = @__userId_0
2021-08-19 14:03:56.089 +07:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2021-08-19 14:03:56.101 +07:00 [INF] Executed action BookApi.Controllers.AccountController.Login (BookApi) in 3234.665ms
2021-08-19 14:03:56.103 +07:00 [INF] Executed endpoint 'BookApi.Controllers.AccountController.Login (BookApi)'
2021-08-19 14:03:56.110 +07:00 [INF] Request finished HTTP/1.1 POST https://localhost:44348/api/Account/Login application/json 60 - 200 - application/json;+charset=utf-8 3292.3922ms
2021-08-19 14:04:18.231 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook application/json 72
2021-08-19 14:04:18.327 +07:00 [INF] Successfully validated the token.
2021-08-19 14:04:18.332 +07:00 [INF] Authorization was successful.
2021-08-19 14:04:18.332 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.BorrowBook (BookApi)'
2021-08-19 14:04:18.335 +07:00 [INF] Route matched with {action = "BorrowBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BorrowBook(BookApi.Models.BorrowInfo) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 14:04:29.195 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 14:04:29.528 +07:00 [INF] Executed DbCommand (251ms) [Parameters=[@__borrowInfo_IdBook_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Author], [t].[CategoryId], [t].[Description], [t].[Name], [t].[Picture], [t].[Year], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[Email], [t0].[EmailConfirmed], [t0].[FirstName], [t0].[LastName], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName], [t0].[BooksId], [t0].[UsersId]
FROM (
    SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__borrowInfo_IdBook_0
) AS [t]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b0].[BooksId], [b0].[UsersId]
    FROM [BookUser] AS [b0]
    INNER JOIN [AspNetUsers] AS [a] ON [b0].[UsersId] = [a].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t0].[BooksId], [t0].[UsersId], [t0].[Id]
2021-08-19 14:04:29.615 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2021-08-19 14:04:29.616 +07:00 [INF] Executing BadRequestObjectResult, writing value of type 'System.String'.
2021-08-19 14:04:29.617 +07:00 [INF] Executed action BookApi.Controllers.BookController.BorrowBook (BookApi) in 11281.95ms
2021-08-19 14:04:29.617 +07:00 [INF] Executed endpoint 'BookApi.Controllers.BookController.BorrowBook (BookApi)'
2021-08-19 14:04:29.618 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook application/json 72 - 400 - text/plain;+charset=utf-8 11387.0361ms
2021-08-19 14:04:43.298 +07:00 [INF] Request starting HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook application/json 72
2021-08-19 14:04:43.298 +07:00 [INF] Successfully validated the token.
2021-08-19 14:04:43.299 +07:00 [INF] Authorization was successful.
2021-08-19 14:04:43.299 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.BorrowBook (BookApi)'
2021-08-19 14:04:43.299 +07:00 [INF] Route matched with {action = "BorrowBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] BorrowBook(BookApi.Models.BorrowInfo) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 14:04:43.330 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 14:04:43.616 +07:00 [INF] Executed DbCommand (283ms) [Parameters=[@__borrowInfo_IdBook_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Author], [t].[CategoryId], [t].[Description], [t].[Name], [t].[Picture], [t].[Year], [t0].[Id], [t0].[AccessFailedCount], [t0].[ConcurrencyStamp], [t0].[Email], [t0].[EmailConfirmed], [t0].[FirstName], [t0].[LastName], [t0].[LockoutEnabled], [t0].[LockoutEnd], [t0].[NormalizedEmail], [t0].[NormalizedUserName], [t0].[PasswordHash], [t0].[PhoneNumber], [t0].[PhoneNumberConfirmed], [t0].[SecurityStamp], [t0].[TwoFactorEnabled], [t0].[UserName], [t0].[BooksId], [t0].[UsersId]
FROM (
    SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
    FROM [Books] AS [b]
    WHERE [b].[Id] = @__borrowInfo_IdBook_0
) AS [t]
LEFT JOIN (
    SELECT [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName], [b0].[BooksId], [b0].[UsersId]
    FROM [BookUser] AS [b0]
    INNER JOIN [AspNetUsers] AS [a] ON [b0].[UsersId] = [a].[Id]
) AS [t0] ON [t].[Id] = [t0].[BooksId]
ORDER BY [t].[Id], [t0].[BooksId], [t0].[UsersId], [t0].[Id]
2021-08-19 14:04:43.834 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[FirstName], [a].[LastName], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[Id] = @__p_0
2021-08-19 14:04:44.022 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 450)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [BookUser] ([BooksId], [UsersId])
VALUES (@p0, @p1);
2021-08-19 14:04:44.594 +07:00 [INF] Executed DbCommand (564ms) [Parameters=[@p6='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = Int32), @p2='?' (Size = 4000), @p3='?' (Size = 4000), @p4='?' (Size = -1) (DbType = Binary), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Books] SET [Author] = @p0, [CategoryId] = @p1, [Description] = @p2, [Name] = @p3, [Picture] = @p4, [Year] = @p5
WHERE [Id] = @p6;
SELECT @@ROWCOUNT;
2021-08-19 14:04:44.626 +07:00 [INF] Executing HttpStatusCodeResult, setting HTTP status code 200
2021-08-19 14:04:44.626 +07:00 [INF] Executed action BookApi.Controllers.BookController.BorrowBook (BookApi) in 1326.9101ms
2021-08-19 14:04:44.626 +07:00 [INF] Executed endpoint 'BookApi.Controllers.BookController.BorrowBook (BookApi)'
2021-08-19 14:04:44.627 +07:00 [INF] Request finished HTTP/1.1 PUT https://localhost:44348/api/Book/BorrowBook application/json 72 - 200 - - 1328.9242ms
2021-08-19 19:30:53.907 +07:00 [INF] Application is Starting
2021-08-19 19:30:59.035 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 19:30:59.614 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 19:30:59.615 +07:00 [INF] Hosting environment: Development
2021-08-19 19:30:59.615 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 19:30:59.695 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 19:30:59.905 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 213.3404ms
2021-08-19 19:31:00.376 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 19:31:00.569 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 193.1329ms
2021-08-19 19:32:18.120 +07:00 [INF] Application is Starting
2021-08-19 19:32:19.722 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 19:32:20.140 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 19:32:20.141 +07:00 [INF] Hosting environment: Development
2021-08-19 19:32:20.141 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 19:32:20.203 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 19:32:20.389 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 188.6134ms
2021-08-19 19:32:20.791 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 19:32:20.953 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 162.1690ms
2021-08-19 19:54:02.011 +07:00 [INF] Application is Starting
2021-08-19 19:54:03.597 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 19:54:03.862 +07:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Marvin.Cache.Headers.Interfaces.IDateParser' while attempting to activate 'Marvin.Cache.Headers.HttpCacheHeadersMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2021-08-19 19:54:03.986 +07:00 [FTL] Application Failed to start
System.InvalidOperationException: Unable to resolve service for type 'Marvin.Cache.Headers.Interfaces.IDateParser' while attempting to activate 'Marvin.Cache.Headers.HttpCacheHeadersMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at BookApi.Program.Main(String[] args) in E:\.Net core Practice\Open Library\BookApi\BookApi\Program.cs:line 28
2021-08-19 19:54:23.290 +07:00 [INF] Application is Starting
2021-08-19 19:54:24.728 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 19:54:25.065 +07:00 [FTL] Application startup exception
System.InvalidOperationException: Unable to resolve service for type 'Marvin.Cache.Headers.Interfaces.IDateParser' while attempting to activate 'Marvin.Cache.Headers.HttpCacheHeadersMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
2021-08-19 19:54:25.149 +07:00 [FTL] Application Failed to start
System.InvalidOperationException: Unable to resolve service for type 'Marvin.Cache.Headers.Interfaces.IDateParser' while attempting to activate 'Marvin.Cache.Headers.HttpCacheHeadersMiddleware'.
   at Microsoft.Extensions.Internal.ActivatorUtilities.ConstructorMatcher.CreateInstance(IServiceProvider provider)
   at Microsoft.Extensions.Internal.ActivatorUtilities.CreateInstance(IServiceProvider provider, Type instanceType, Object[] parameters)
   at Microsoft.AspNetCore.Builder.UseMiddlewareExtensions.<>c__DisplayClass5_0.<UseMiddleware>b__0(RequestDelegate next)
   at Microsoft.AspNetCore.Builder.ApplicationBuilder.Build()
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at BookApi.Program.Main(String[] args) in E:\.Net core Practice\Open Library\BookApi\BookApi\Program.cs:line 28
2021-08-19 20:00:23.912 +07:00 [INF] Application is Starting
2021-08-19 20:00:24.906 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 20:00:25.192 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 20:00:25.192 +07:00 [INF] Hosting environment: Development
2021-08-19 20:00:25.192 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 20:00:25.260 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 20:00:25.395 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 136.4225ms
2021-08-19 20:00:25.619 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 20:00:25.745 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 125.3350ms
2021-08-19 20:01:47.036 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44348/api/Book/1 - -
2021-08-19 20:01:47.665 +07:00 [INF] No cached response available for this request.
2021-08-19 20:01:47.678 +07:00 [INF] Checking for conditional GET/HEAD.
2021-08-19 20:01:47.686 +07:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2021-08-19 20:01:47.686 +07:00 [INF] Don't generate 304 - Not Modified.  Continue.
2021-08-19 20:01:47.687 +07:00 [INF] Checking for conditional PUT/PATCH.
2021-08-19 20:01:47.687 +07:00 [INF] Not valid - method isn't PUT or PATCH.
2021-08-19 20:01:47.687 +07:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2021-08-19 20:01:47.691 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.GetBook (BookApi)'
2021-08-19 20:01:47.733 +07:00 [INF] Route matched with {action = "GetBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBook(Int32) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 20:01:48.965 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 20:01:50.099 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2021-08-19 20:01:50.166 +07:00 [INF] Executing OkObjectResult, writing value of type 'BookApi.Models.BookDTO'.
2021-08-19 20:01:50.181 +07:00 [INF] Executed action BookApi.Controllers.BookController.GetBook (BookApi) in 2440.1642ms
2021-08-19 20:01:50.181 +07:00 [INF] Executed endpoint 'BookApi.Controllers.BookController.GetBook (BookApi)'
2021-08-19 20:01:50.183 +07:00 [INF] Generating expiration headers.
2021-08-19 20:01:50.185 +07:00 [INF] Expiration headers generated. Expires: Thu, 19 Aug 2021 13:03:50 GMT. Cache-Control: private,max-age=120,must-revalidate.
2021-08-19 20:01:50.186 +07:00 [INF] Generating Validation headers.
2021-08-19 20:01:50.195 +07:00 [INF] Validation headers generated. ETag: Strong, "01045701573E6A5D6C7AD4B6E54BE358". Last-Modified: Thu, 19 Aug 2021 13:01:50 GMT
2021-08-19 20:01:50.196 +07:00 [INF] Generating Vary header.
2021-08-19 20:01:50.196 +07:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2021-08-19 20:01:50.202 +07:00 [INF] The response could not be cached for this request.
2021-08-19 20:01:50.209 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44348/api/Book/1 - - - 200 - application/json;+charset=utf-8 3173.7659ms
2021-08-19 20:17:51.628 +07:00 [INF] Application is Starting
2021-08-19 20:17:52.588 +07:00 [FTL] Application Failed to start
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IRateLimitCounterStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.) (Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IIpPolicyStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheIpPolicyStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IRateLimitCounterStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, Type serviceType, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.DefaultServiceProviderFactory.CreateServiceProvider(IServiceCollection containerBuilder)
   at Microsoft.Extensions.Hosting.Internal.ServiceFactoryAdapter`1.CreateServiceProvider(Object containerBuilder)
   at Microsoft.Extensions.Hosting.HostBuilder.CreateServiceProvider()
   at Microsoft.Extensions.Hosting.HostBuilder.Build()
   at BookApi.Program.Main(String[] args) in E:\.Net core Practice\Open Library\BookApi\BookApi\Program.cs:line 28
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IIpPolicyStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheIpPolicyStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, Type serviceType, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)<---

2021-08-19 20:20:20.926 +07:00 [INF] Application is Starting
2021-08-19 20:20:21.843 +07:00 [FTL] Application Failed to start
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IRateLimitCounterStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.) (Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IIpPolicyStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheIpPolicyStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IRateLimitCounterStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, Type serviceType, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.DefaultServiceProviderFactory.CreateServiceProvider(IServiceCollection containerBuilder)
   at Microsoft.Extensions.Hosting.Internal.ServiceFactoryAdapter`1.CreateServiceProvider(Object containerBuilder)
   at Microsoft.Extensions.Hosting.HostBuilder.CreateServiceProvider()
   at Microsoft.Extensions.Hosting.HostBuilder.Build()
   at BookApi.Program.Main(String[] args) in E:\.Net core Practice\Open Library\BookApi\BookApi\Program.cs:line 28
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IIpPolicyStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheIpPolicyStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, Type serviceType, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)<---

2021-08-19 20:21:34.029 +07:00 [INF] Application is Starting
2021-08-19 20:21:35.020 +07:00 [FTL] Application Failed to start
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IRateLimitCounterStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.) (Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IIpPolicyStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheIpPolicyStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IRateLimitCounterStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, Type serviceType, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.DefaultServiceProviderFactory.CreateServiceProvider(IServiceCollection containerBuilder)
   at Microsoft.Extensions.Hosting.Internal.ServiceFactoryAdapter`1.CreateServiceProvider(Object containerBuilder)
   at Microsoft.Extensions.Hosting.HostBuilder.CreateServiceProvider()
   at Microsoft.Extensions.Hosting.HostBuilder.Build()
   at BookApi.Program.Main(String[] args) in E:\.Net core Practice\Open Library\BookApi\BookApi\Program.cs:line 28
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IIpPolicyStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheIpPolicyStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, Type serviceType, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)<---

2021-08-19 20:23:06.117 +07:00 [INF] Application is Starting
2021-08-19 20:23:07.030 +07:00 [FTL] Application Failed to start
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IRateLimitCounterStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.) (Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IIpPolicyStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheIpPolicyStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IRateLimitCounterStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, Type serviceType, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.DefaultServiceProviderFactory.CreateServiceProvider(IServiceCollection containerBuilder)
   at Microsoft.Extensions.Hosting.Internal.ServiceFactoryAdapter`1.CreateServiceProvider(Object containerBuilder)
   at Microsoft.Extensions.Hosting.HostBuilder.CreateServiceProvider()
   at Microsoft.Extensions.Hosting.HostBuilder.Build()
   at BookApi.Program.Main(String[] args) in E:\.Net core Practice\Open Library\BookApi\BookApi\Program.cs:line 28
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IIpPolicyStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheIpPolicyStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, Type serviceType, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)<---

2021-08-19 20:25:51.778 +07:00 [INF] Application is Starting
2021-08-19 20:25:52.645 +07:00 [FTL] Application Failed to start
System.AggregateException: Some services are not able to be constructed (Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IRateLimitCounterStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.) (Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IIpPolicyStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheIpPolicyStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.)
 ---> System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IRateLimitCounterStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheRateLimitCounterStore'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, Type serviceType, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.DefaultServiceProviderFactory.CreateServiceProvider(IServiceCollection containerBuilder)
   at Microsoft.Extensions.Hosting.Internal.ServiceFactoryAdapter`1.CreateServiceProvider(Object containerBuilder)
   at Microsoft.Extensions.Hosting.HostBuilder.CreateServiceProvider()
   at Microsoft.Extensions.Hosting.HostBuilder.Build()
   at BookApi.Program.Main(String[] args) in E:\.Net core Practice\Open Library\BookApi\BookApi\Program.cs:line 28
 ---> (Inner Exception #1) System.InvalidOperationException: Error while validating the service descriptor 'ServiceType: AspNetCoreRateLimit.IIpPolicyStore Lifetime: Singleton ImplementationType: AspNetCoreRateLimit.MemoryCacheIpPolicyStore': Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.
 ---> System.InvalidOperationException: Unable to resolve service for type 'Microsoft.Extensions.Caching.Memory.IMemoryCache' while attempting to activate 'AspNetCoreRateLimit.MemoryCacheIpPolicyStore'.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(Type serviceType, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, Type serviceType, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, Type serviceType, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   --- End of inner exception stack trace ---
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(IEnumerable`1 serviceDescriptors, IServiceProviderEngine engine, ServiceProviderOptions options)<---

2021-08-19 20:27:18.744 +07:00 [INF] Application is Starting
2021-08-19 20:27:19.739 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 20:27:19.967 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 20:27:19.967 +07:00 [INF] Hosting environment: Development
2021-08-19 20:27:19.967 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 20:27:19.999 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 20:27:20.118 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 118.9926ms
2021-08-19 20:27:20.322 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 20:27:20.443 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 120.2453ms
2021-08-19 20:27:28.969 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44348/api/Book/1 - -
2021-08-19 20:27:28.977 +07:00 [INF] No cached response available for this request.
2021-08-19 20:27:28.995 +07:00 [INF] Checking for conditional GET/HEAD.
2021-08-19 20:27:28.998 +07:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2021-08-19 20:27:28.998 +07:00 [INF] Don't generate 304 - Not Modified.  Continue.
2021-08-19 20:27:28.999 +07:00 [INF] Checking for conditional PUT/PATCH.
2021-08-19 20:27:28.999 +07:00 [INF] Not valid - method isn't PUT or PATCH.
2021-08-19 20:27:28.999 +07:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2021-08-19 20:27:29.154 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.GetBook (BookApi)'
2021-08-19 20:27:29.185 +07:00 [INF] Route matched with {action = "GetBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBook(Int32) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 20:27:30.148 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 20:27:30.842 +07:00 [INF] Executed DbCommand (45ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2021-08-19 20:27:30.902 +07:00 [INF] Executing OkObjectResult, writing value of type 'BookApi.Models.BookDTO'.
2021-08-19 20:27:30.914 +07:00 [INF] Executed action BookApi.Controllers.BookController.GetBook (BookApi) in 1723.9028ms
2021-08-19 20:27:30.915 +07:00 [INF] Executed endpoint 'BookApi.Controllers.BookController.GetBook (BookApi)'
2021-08-19 20:27:30.918 +07:00 [INF] Generating expiration headers.
2021-08-19 20:27:30.919 +07:00 [INF] Expiration headers generated. Expires: Thu, 19 Aug 2021 13:29:30 GMT. Cache-Control: private,max-age=120,must-revalidate.
2021-08-19 20:27:30.920 +07:00 [INF] Generating Validation headers.
2021-08-19 20:27:30.927 +07:00 [INF] Validation headers generated. ETag: Strong, "01045701573E6A5D6C7AD4B6E54BE358". Last-Modified: Thu, 19 Aug 2021 13:27:30 GMT
2021-08-19 20:27:30.927 +07:00 [INF] Generating Vary header.
2021-08-19 20:27:30.927 +07:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2021-08-19 20:27:30.936 +07:00 [INF] The response could not be cached for this request.
2021-08-19 20:27:30.939 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44348/api/Book/1 - - - 200 - application/json;+charset=utf-8 1970.0574ms
2021-08-19 20:27:31.586 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44348/api/Book/1 - -
2021-08-19 20:27:31.586 +07:00 [INF] No cached response available for this request.
2021-08-19 20:27:31.587 +07:00 [INF] Checking for conditional GET/HEAD.
2021-08-19 20:27:31.587 +07:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2021-08-19 20:27:31.587 +07:00 [INF] Don't generate 304 - Not Modified.  Continue.
2021-08-19 20:27:31.587 +07:00 [INF] Checking for conditional PUT/PATCH.
2021-08-19 20:27:31.587 +07:00 [INF] Not valid - method isn't PUT or PATCH.
2021-08-19 20:27:31.587 +07:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2021-08-19 20:27:31.589 +07:00 [INF] Request get:/api/book/1 from IP ::1 has been blocked, quota 1/5s exceeded by 1. Blocked by rule *, TraceIdentifier 8000003c-0006-ff00-b63f-84710c7967bb.
2021-08-19 20:27:31.590 +07:00 [INF] Generating expiration headers.
2021-08-19 20:27:31.590 +07:00 [INF] Expiration headers generated. Expires: Thu, 19 Aug 2021 13:29:31 GMT. Cache-Control: private,max-age=120,must-revalidate.
2021-08-19 20:27:31.590 +07:00 [INF] Not generating Validation headers as the response status code does not indicate succes.
2021-08-19 20:27:31.590 +07:00 [INF] Generating Vary header.
2021-08-19 20:27:31.590 +07:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2021-08-19 20:27:31.591 +07:00 [INF] The response could not be cached for this request.
2021-08-19 20:27:31.591 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44348/api/Book/1 - - - 429 - text/plain 5.3872ms
2021-08-19 20:27:32.499 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44348/api/Book/1 - -
2021-08-19 20:27:32.499 +07:00 [INF] No cached response available for this request.
2021-08-19 20:27:32.500 +07:00 [INF] Checking for conditional GET/HEAD.
2021-08-19 20:27:32.500 +07:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2021-08-19 20:27:32.500 +07:00 [INF] Don't generate 304 - Not Modified.  Continue.
2021-08-19 20:27:32.500 +07:00 [INF] Checking for conditional PUT/PATCH.
2021-08-19 20:27:32.500 +07:00 [INF] Not valid - method isn't PUT or PATCH.
2021-08-19 20:27:32.500 +07:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2021-08-19 20:27:32.500 +07:00 [INF] Request get:/api/book/1 from IP ::1 has been blocked, quota 1/5s exceeded by 2. Blocked by rule *, TraceIdentifier 8000003d-0006-ff00-b63f-84710c7967bb.
2021-08-19 20:27:32.500 +07:00 [INF] Generating expiration headers.
2021-08-19 20:27:32.500 +07:00 [INF] Expiration headers generated. Expires: Thu, 19 Aug 2021 13:29:32 GMT. Cache-Control: private,max-age=120,must-revalidate.
2021-08-19 20:27:32.500 +07:00 [INF] Not generating Validation headers as the response status code does not indicate succes.
2021-08-19 20:27:32.500 +07:00 [INF] Generating Vary header.
2021-08-19 20:27:32.500 +07:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2021-08-19 20:27:32.501 +07:00 [INF] The response could not be cached for this request.
2021-08-19 20:27:32.501 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44348/api/Book/1 - - - 429 - text/plain 2.0603ms
2021-08-19 20:27:33.166 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44348/api/Book/1 - -
2021-08-19 20:27:33.166 +07:00 [INF] No cached response available for this request.
2021-08-19 20:27:33.166 +07:00 [INF] Checking for conditional GET/HEAD.
2021-08-19 20:27:33.166 +07:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2021-08-19 20:27:33.167 +07:00 [INF] Don't generate 304 - Not Modified.  Continue.
2021-08-19 20:27:33.167 +07:00 [INF] Checking for conditional PUT/PATCH.
2021-08-19 20:27:33.167 +07:00 [INF] Not valid - method isn't PUT or PATCH.
2021-08-19 20:27:33.167 +07:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2021-08-19 20:27:33.167 +07:00 [INF] Request get:/api/book/1 from IP ::1 has been blocked, quota 1/5s exceeded by 3. Blocked by rule *, TraceIdentifier 8000003e-0006-ff00-b63f-84710c7967bb.
2021-08-19 20:27:33.167 +07:00 [INF] Generating expiration headers.
2021-08-19 20:27:33.167 +07:00 [INF] Expiration headers generated. Expires: Thu, 19 Aug 2021 13:29:33 GMT. Cache-Control: private,max-age=120,must-revalidate.
2021-08-19 20:27:33.167 +07:00 [INF] Not generating Validation headers as the response status code does not indicate succes.
2021-08-19 20:27:33.167 +07:00 [INF] Generating Vary header.
2021-08-19 20:27:33.167 +07:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2021-08-19 20:27:33.168 +07:00 [INF] The response could not be cached for this request.
2021-08-19 20:27:33.168 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44348/api/Book/1 - - - 429 - text/plain 1.8186ms
2021-08-19 20:27:33.888 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44348/api/Book/1 - -
2021-08-19 20:27:33.889 +07:00 [INF] No cached response available for this request.
2021-08-19 20:27:33.889 +07:00 [INF] Checking for conditional GET/HEAD.
2021-08-19 20:27:33.889 +07:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2021-08-19 20:27:33.889 +07:00 [INF] Don't generate 304 - Not Modified.  Continue.
2021-08-19 20:27:33.889 +07:00 [INF] Checking for conditional PUT/PATCH.
2021-08-19 20:27:33.889 +07:00 [INF] Not valid - method isn't PUT or PATCH.
2021-08-19 20:27:33.889 +07:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2021-08-19 20:27:33.889 +07:00 [INF] Request get:/api/book/1 from IP ::1 has been blocked, quota 1/5s exceeded by 4. Blocked by rule *, TraceIdentifier 8000003f-0006-ff00-b63f-84710c7967bb.
2021-08-19 20:27:33.889 +07:00 [INF] Generating expiration headers.
2021-08-19 20:27:33.889 +07:00 [INF] Expiration headers generated. Expires: Thu, 19 Aug 2021 13:29:33 GMT. Cache-Control: private,max-age=120,must-revalidate.
2021-08-19 20:27:33.889 +07:00 [INF] Not generating Validation headers as the response status code does not indicate succes.
2021-08-19 20:27:33.889 +07:00 [INF] Generating Vary header.
2021-08-19 20:27:33.889 +07:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2021-08-19 20:27:33.889 +07:00 [INF] The response could not be cached for this request.
2021-08-19 20:27:33.890 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44348/api/Book/1 - - - 429 - text/plain 1.2062ms
2021-08-19 20:27:35.153 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44348/api/Book/1 - -
2021-08-19 20:27:35.153 +07:00 [INF] No cached response available for this request.
2021-08-19 20:27:35.153 +07:00 [INF] Checking for conditional GET/HEAD.
2021-08-19 20:27:35.153 +07:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2021-08-19 20:27:35.153 +07:00 [INF] Don't generate 304 - Not Modified.  Continue.
2021-08-19 20:27:35.153 +07:00 [INF] Checking for conditional PUT/PATCH.
2021-08-19 20:27:35.153 +07:00 [INF] Not valid - method isn't PUT or PATCH.
2021-08-19 20:27:35.153 +07:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2021-08-19 20:27:35.154 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.GetBook (BookApi)'
2021-08-19 20:27:35.155 +07:00 [INF] Route matched with {action = "GetBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBook(Int32) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 20:27:35.182 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 20:27:35.192 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2021-08-19 20:27:35.193 +07:00 [INF] Executing OkObjectResult, writing value of type 'BookApi.Models.BookDTO'.
2021-08-19 20:27:35.193 +07:00 [INF] Executed action BookApi.Controllers.BookController.GetBook (BookApi) in 38.6627ms
2021-08-19 20:27:35.193 +07:00 [INF] Executed endpoint 'BookApi.Controllers.BookController.GetBook (BookApi)'
2021-08-19 20:27:35.193 +07:00 [INF] Generating expiration headers.
2021-08-19 20:27:35.194 +07:00 [INF] Expiration headers generated. Expires: Thu, 19 Aug 2021 13:29:35 GMT. Cache-Control: private,max-age=120,must-revalidate.
2021-08-19 20:27:35.194 +07:00 [INF] Generating Validation headers.
2021-08-19 20:27:35.194 +07:00 [INF] Validation headers generated. ETag: Strong, "01045701573E6A5D6C7AD4B6E54BE358". Last-Modified: Thu, 19 Aug 2021 13:27:35 GMT
2021-08-19 20:27:35.194 +07:00 [INF] Generating Vary header.
2021-08-19 20:27:35.194 +07:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2021-08-19 20:27:35.194 +07:00 [INF] The response could not be cached for this request.
2021-08-19 20:27:35.195 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44348/api/Book/1 - - - 200 - application/json;+charset=utf-8 41.6680ms
2021-08-19 20:27:37.405 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44348/api/Book/1 - -
2021-08-19 20:27:37.405 +07:00 [INF] No cached response available for this request.
2021-08-19 20:27:37.405 +07:00 [INF] Checking for conditional GET/HEAD.
2021-08-19 20:27:37.405 +07:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2021-08-19 20:27:37.405 +07:00 [INF] Don't generate 304 - Not Modified.  Continue.
2021-08-19 20:27:37.405 +07:00 [INF] Checking for conditional PUT/PATCH.
2021-08-19 20:27:37.405 +07:00 [INF] Not valid - method isn't PUT or PATCH.
2021-08-19 20:27:37.405 +07:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2021-08-19 20:27:37.405 +07:00 [INF] Request get:/api/book/1 from IP ::1 has been blocked, quota 1/5s exceeded by 1. Blocked by rule *, TraceIdentifier 80000041-0006-ff00-b63f-84710c7967bb.
2021-08-19 20:27:37.405 +07:00 [INF] Generating expiration headers.
2021-08-19 20:27:37.405 +07:00 [INF] Expiration headers generated. Expires: Thu, 19 Aug 2021 13:29:37 GMT. Cache-Control: private,max-age=120,must-revalidate.
2021-08-19 20:27:37.406 +07:00 [INF] Not generating Validation headers as the response status code does not indicate succes.
2021-08-19 20:27:37.406 +07:00 [INF] Generating Vary header.
2021-08-19 20:27:37.406 +07:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2021-08-19 20:27:37.406 +07:00 [INF] The response could not be cached for this request.
2021-08-19 20:27:37.407 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44348/api/Book/1 - - - 429 - text/plain 1.5891ms
2021-08-19 20:27:37.996 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44348/api/Book/1 - -
2021-08-19 20:27:37.996 +07:00 [INF] No cached response available for this request.
2021-08-19 20:27:37.996 +07:00 [INF] Checking for conditional GET/HEAD.
2021-08-19 20:27:37.996 +07:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2021-08-19 20:27:37.996 +07:00 [INF] Don't generate 304 - Not Modified.  Continue.
2021-08-19 20:27:37.996 +07:00 [INF] Checking for conditional PUT/PATCH.
2021-08-19 20:27:37.996 +07:00 [INF] Not valid - method isn't PUT or PATCH.
2021-08-19 20:27:37.996 +07:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2021-08-19 20:27:37.997 +07:00 [INF] Request get:/api/book/1 from IP ::1 has been blocked, quota 1/5s exceeded by 2. Blocked by rule *, TraceIdentifier 80000042-0006-ff00-b63f-84710c7967bb.
2021-08-19 20:27:37.997 +07:00 [INF] Generating expiration headers.
2021-08-19 20:27:37.997 +07:00 [INF] Expiration headers generated. Expires: Thu, 19 Aug 2021 13:29:37 GMT. Cache-Control: private,max-age=120,must-revalidate.
2021-08-19 20:27:37.997 +07:00 [INF] Not generating Validation headers as the response status code does not indicate succes.
2021-08-19 20:27:37.997 +07:00 [INF] Generating Vary header.
2021-08-19 20:27:37.998 +07:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2021-08-19 20:27:37.998 +07:00 [INF] The response could not be cached for this request.
2021-08-19 20:27:37.999 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44348/api/Book/1 - - - 429 - text/plain 3.2361ms
2021-08-19 20:28:10.493 +07:00 [INF] Application is Starting
2021-08-19 20:28:11.468 +07:00 [INF] User profile is available. Using 'C:\Users\APTS\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2021-08-19 20:28:11.692 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2021-08-19 20:28:11.693 +07:00 [INF] Hosting environment: Development
2021-08-19 20:28:11.693 +07:00 [INF] Content root path: E:\.Net core Practice\Open Library\BookApi\BookApi
2021-08-19 20:28:11.725 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/index.html - -
2021-08-19 20:28:11.849 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/index.html - - - 200 - text/html;charset=utf-8 125.3422ms
2021-08-19 20:28:12.071 +07:00 [INF] Request starting HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - -
2021-08-19 20:28:12.199 +07:00 [INF] Request finished HTTP/2 GET https://localhost:44348/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 127.8650ms
2021-08-19 20:28:13.541 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44348/api/Book/1 - -
2021-08-19 20:28:13.549 +07:00 [INF] No cached response available for this request.
2021-08-19 20:28:13.569 +07:00 [INF] Checking for conditional GET/HEAD.
2021-08-19 20:28:13.571 +07:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2021-08-19 20:28:13.571 +07:00 [INF] Don't generate 304 - Not Modified.  Continue.
2021-08-19 20:28:13.572 +07:00 [INF] Checking for conditional PUT/PATCH.
2021-08-19 20:28:13.572 +07:00 [INF] Not valid - method isn't PUT or PATCH.
2021-08-19 20:28:13.572 +07:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2021-08-19 20:28:13.705 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.GetBook (BookApi)'
2021-08-19 20:28:13.734 +07:00 [INF] Route matched with {action = "GetBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBook(Int32) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 20:28:14.758 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 20:28:15.433 +07:00 [INF] Executed DbCommand (57ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2021-08-19 20:28:15.494 +07:00 [INF] Executing OkObjectResult, writing value of type 'BookApi.Models.BookDTO'.
2021-08-19 20:28:15.508 +07:00 [INF] Executed action BookApi.Controllers.BookController.GetBook (BookApi) in 1769.4935ms
2021-08-19 20:28:15.508 +07:00 [INF] Executed endpoint 'BookApi.Controllers.BookController.GetBook (BookApi)'
2021-08-19 20:28:15.511 +07:00 [INF] Generating expiration headers.
2021-08-19 20:28:15.513 +07:00 [INF] Expiration headers generated. Expires: Thu, 19 Aug 2021 13:30:15 GMT. Cache-Control: private,max-age=120,must-revalidate.
2021-08-19 20:28:15.515 +07:00 [INF] Generating Validation headers.
2021-08-19 20:28:15.523 +07:00 [INF] Validation headers generated. ETag: Strong, "01045701573E6A5D6C7AD4B6E54BE358". Last-Modified: Thu, 19 Aug 2021 13:28:15 GMT
2021-08-19 20:28:15.524 +07:00 [INF] Generating Vary header.
2021-08-19 20:28:15.524 +07:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2021-08-19 20:28:15.531 +07:00 [INF] The response could not be cached for this request.
2021-08-19 20:28:15.537 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44348/api/Book/1 - - - 200 - application/json;+charset=utf-8 1996.7497ms
2021-08-19 20:28:16.190 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44348/api/Book/1 - -
2021-08-19 20:28:16.191 +07:00 [INF] No cached response available for this request.
2021-08-19 20:28:16.191 +07:00 [INF] Checking for conditional GET/HEAD.
2021-08-19 20:28:16.191 +07:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2021-08-19 20:28:16.191 +07:00 [INF] Don't generate 304 - Not Modified.  Continue.
2021-08-19 20:28:16.191 +07:00 [INF] Checking for conditional PUT/PATCH.
2021-08-19 20:28:16.191 +07:00 [INF] Not valid - method isn't PUT or PATCH.
2021-08-19 20:28:16.191 +07:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2021-08-19 20:28:16.193 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.GetBook (BookApi)'
2021-08-19 20:28:16.194 +07:00 [INF] Route matched with {action = "GetBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBook(Int32) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 20:28:16.222 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 20:28:16.229 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2021-08-19 20:28:16.231 +07:00 [INF] Executing OkObjectResult, writing value of type 'BookApi.Models.BookDTO'.
2021-08-19 20:28:16.231 +07:00 [INF] Executed action BookApi.Controllers.BookController.GetBook (BookApi) in 37.5019ms
2021-08-19 20:28:16.231 +07:00 [INF] Executed endpoint 'BookApi.Controllers.BookController.GetBook (BookApi)'
2021-08-19 20:28:16.231 +07:00 [INF] Generating expiration headers.
2021-08-19 20:28:16.231 +07:00 [INF] Expiration headers generated. Expires: Thu, 19 Aug 2021 13:30:16 GMT. Cache-Control: private,max-age=120,must-revalidate.
2021-08-19 20:28:16.232 +07:00 [INF] Generating Validation headers.
2021-08-19 20:28:16.232 +07:00 [INF] Validation headers generated. ETag: Strong, "01045701573E6A5D6C7AD4B6E54BE358". Last-Modified: Thu, 19 Aug 2021 13:28:16 GMT
2021-08-19 20:28:16.232 +07:00 [INF] Generating Vary header.
2021-08-19 20:28:16.232 +07:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2021-08-19 20:28:16.233 +07:00 [INF] The response could not be cached for this request.
2021-08-19 20:28:16.234 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44348/api/Book/1 - - - 200 - application/json;+charset=utf-8 43.4236ms
2021-08-19 20:28:17.451 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44348/api/Book/1 - -
2021-08-19 20:28:17.451 +07:00 [INF] No cached response available for this request.
2021-08-19 20:28:17.451 +07:00 [INF] Checking for conditional GET/HEAD.
2021-08-19 20:28:17.452 +07:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2021-08-19 20:28:17.452 +07:00 [INF] Don't generate 304 - Not Modified.  Continue.
2021-08-19 20:28:17.452 +07:00 [INF] Checking for conditional PUT/PATCH.
2021-08-19 20:28:17.452 +07:00 [INF] Not valid - method isn't PUT or PATCH.
2021-08-19 20:28:17.452 +07:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2021-08-19 20:28:17.453 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.GetBook (BookApi)'
2021-08-19 20:28:17.453 +07:00 [INF] Route matched with {action = "GetBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBook(Int32) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 20:28:17.463 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 20:28:17.471 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2021-08-19 20:28:17.471 +07:00 [INF] Executing OkObjectResult, writing value of type 'BookApi.Models.BookDTO'.
2021-08-19 20:28:17.471 +07:00 [INF] Executed action BookApi.Controllers.BookController.GetBook (BookApi) in 18.1337ms
2021-08-19 20:28:17.471 +07:00 [INF] Executed endpoint 'BookApi.Controllers.BookController.GetBook (BookApi)'
2021-08-19 20:28:17.472 +07:00 [INF] Generating expiration headers.
2021-08-19 20:28:17.472 +07:00 [INF] Expiration headers generated. Expires: Thu, 19 Aug 2021 13:30:17 GMT. Cache-Control: private,max-age=120,must-revalidate.
2021-08-19 20:28:17.472 +07:00 [INF] Generating Validation headers.
2021-08-19 20:28:17.472 +07:00 [INF] Validation headers generated. ETag: Strong, "01045701573E6A5D6C7AD4B6E54BE358". Last-Modified: Thu, 19 Aug 2021 13:28:17 GMT
2021-08-19 20:28:17.472 +07:00 [INF] Generating Vary header.
2021-08-19 20:28:17.472 +07:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2021-08-19 20:28:17.472 +07:00 [INF] The response could not be cached for this request.
2021-08-19 20:28:17.473 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44348/api/Book/1 - - - 200 - application/json;+charset=utf-8 22.1700ms
2021-08-19 20:28:18.447 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44348/api/Book/1 - -
2021-08-19 20:28:18.447 +07:00 [INF] No cached response available for this request.
2021-08-19 20:28:18.447 +07:00 [INF] Checking for conditional GET/HEAD.
2021-08-19 20:28:18.447 +07:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2021-08-19 20:28:18.447 +07:00 [INF] Don't generate 304 - Not Modified.  Continue.
2021-08-19 20:28:18.447 +07:00 [INF] Checking for conditional PUT/PATCH.
2021-08-19 20:28:18.447 +07:00 [INF] Not valid - method isn't PUT or PATCH.
2021-08-19 20:28:18.447 +07:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2021-08-19 20:28:18.451 +07:00 [INF] Request get:/api/book/1 from IP ::1 has been blocked, quota 3/5s exceeded by 1. Blocked by rule *, TraceIdentifier 80000047-0006-ff00-b63f-84710c7967bb.
2021-08-19 20:28:18.452 +07:00 [INF] Generating expiration headers.
2021-08-19 20:28:18.452 +07:00 [INF] Expiration headers generated. Expires: Thu, 19 Aug 2021 13:30:18 GMT. Cache-Control: private,max-age=120,must-revalidate.
2021-08-19 20:28:18.452 +07:00 [INF] Not generating Validation headers as the response status code does not indicate succes.
2021-08-19 20:28:18.452 +07:00 [INF] Generating Vary header.
2021-08-19 20:28:18.452 +07:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2021-08-19 20:28:18.453 +07:00 [INF] The response could not be cached for this request.
2021-08-19 20:28:18.454 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44348/api/Book/1 - - - 429 - text/plain 6.9677ms
2021-08-19 20:28:20.608 +07:00 [INF] Request starting HTTP/1.1 GET https://localhost:44348/api/Book/1 - -
2021-08-19 20:28:20.608 +07:00 [INF] No cached response available for this request.
2021-08-19 20:28:20.608 +07:00 [INF] Checking for conditional GET/HEAD.
2021-08-19 20:28:20.608 +07:00 [INF] Not valid - no If-None-Match or If-Modified-Since headers.
2021-08-19 20:28:20.608 +07:00 [INF] Don't generate 304 - Not Modified.  Continue.
2021-08-19 20:28:20.608 +07:00 [INF] Checking for conditional PUT/PATCH.
2021-08-19 20:28:20.608 +07:00 [INF] Not valid - method isn't PUT or PATCH.
2021-08-19 20:28:20.608 +07:00 [INF] Don't generate 412 - Precondition Failed.  Continue.
2021-08-19 20:28:20.608 +07:00 [INF] Executing endpoint 'BookApi.Controllers.BookController.GetBook (BookApi)'
2021-08-19 20:28:20.608 +07:00 [INF] Route matched with {action = "GetBook", controller = "Book"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBook(Int32) on controller BookApi.Controllers.BookController (BookApi).
2021-08-19 20:28:20.608 +07:00 [INF] Entity Framework Core 5.0.9 initialized 'ApplicationDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer' with options: None
2021-08-19 20:28:20.612 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [b].[Id], [b].[Author], [b].[CategoryId], [b].[Description], [b].[Name], [b].[Picture], [b].[Year]
FROM [Books] AS [b]
WHERE [b].[Id] = @__id_0
2021-08-19 20:28:20.612 +07:00 [INF] Executing OkObjectResult, writing value of type 'BookApi.Models.BookDTO'.
2021-08-19 20:28:20.613 +07:00 [INF] Executed action BookApi.Controllers.BookController.GetBook (BookApi) in 4.4983ms
2021-08-19 20:28:20.613 +07:00 [INF] Executed endpoint 'BookApi.Controllers.BookController.GetBook (BookApi)'
2021-08-19 20:28:20.613 +07:00 [INF] Generating expiration headers.
2021-08-19 20:28:20.613 +07:00 [INF] Expiration headers generated. Expires: Thu, 19 Aug 2021 13:30:20 GMT. Cache-Control: private,max-age=120,must-revalidate.
2021-08-19 20:28:20.613 +07:00 [INF] Generating Validation headers.
2021-08-19 20:28:20.613 +07:00 [INF] Validation headers generated. ETag: Strong, "01045701573E6A5D6C7AD4B6E54BE358". Last-Modified: Thu, 19 Aug 2021 13:28:20 GMT
2021-08-19 20:28:20.613 +07:00 [INF] Generating Vary header.
2021-08-19 20:28:20.613 +07:00 [INF] Vary header generated: Accept, Accept-Language, Accept-Encoding.
2021-08-19 20:28:20.613 +07:00 [INF] The response could not be cached for this request.
2021-08-19 20:28:20.614 +07:00 [INF] Request finished HTTP/1.1 GET https://localhost:44348/api/Book/1 - - - 200 - application/json;+charset=utf-8 6.2653ms
